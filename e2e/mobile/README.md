# Mobile E2E Testing with mobile-mcp

SlotAnalyzerアプリのモバイルE2Eテストガイド。

## 前提条件

- Android SDK/Emulator がインストールされていること
- mobile-mcp MCPサーバーが有効であること
- Expoでビルドされたアプリがインストールされていること

## テスト実行方法

### 1. デバイス確認

Claude Codeで以下のコマンドを実行：

```
mobile-mcpを使ってデバイス一覧を表示して
```

### 2. アプリ起動

```
SlotAnalyzerアプリ (com.slotanalyzer.app) を起動して
```

### 3. テストシナリオ

#### カウンター機能テスト

1. カウンター画面が表示されることを確認
2. 機種が選択されていることを確認
3. +ボタンをタップしてカウントが増加することを確認
4. -ボタンをタップしてカウントが減少することを確認
5. ゲーム数入力が機能することを確認

```
# Claude Codeへの指示例
SlotAnalyzerアプリで以下をテストして：
1. カウンター画面のスクリーンショットを撮影
2. ぶどうカウンターの+ボタンをタップ
3. カウントが1増加したか確認
4. もう一度スクリーンショットを撮影して比較
```

#### タブナビゲーションテスト

1. 下部のタブバーが表示されることを確認
2. 各タブをタップして画面遷移を確認
   - カウンター
   - 機種一覧
   - 履歴
   - 設定

```
# Claude Codeへの指示例
SlotAnalyzerアプリのタブナビゲーションをテストして：
1. 機種一覧タブをタップ
2. スクリーンショットを撮影
3. 履歴タブをタップ
4. スクリーンショットを撮影
5. 設定タブをタップ
6. スクリーンショットを撮影
```

#### 機種作成テスト

1. 機種一覧画面で新規作成ボタンをタップ
2. 機種名を入力
3. 小役を追加
4. 確率を設定
5. 保存

```
# Claude Codeへの指示例
SlotAnalyzerで新しい機種を作成して：
1. 機種一覧画面に移動
2. 新規作成ボタンをタップ
3. 機種名「テスト機種」を入力
4. 保存して機種一覧に戻る
```

#### 設定テスト

1. 設定画面でテーマ切り替え
2. バイブレーション設定の切り替え
3. 表示設定の変更

## テスト結果の記録

各テスト実行後、以下を記録：

- スクリーンショット（e2e/mobile/screenshots/に保存）
- 実行日時
- 成功/失敗
- エラー内容（あれば）

## 自動テストスクリプト

Claude Codeに以下のようなプロンプトで一連のテストを実行可能：

```
SlotAnalyzerアプリの完全なE2Eテストを実行して：
1. アプリを起動
2. カウンター画面のスクリーンショット
3. +ボタンを3回タップ
4. 機種一覧タブへ移動してスクリーンショット
5. 設定タブへ移動してスクリーンショット
6. 結果をまとめて報告
```
